<!DOCTYPE html>
<html>
<head>
    <title>MCCPG</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,0,0" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        h1 {
            display: inline-flex;
            align-items: center;
        }
        .material-symbols-outlined {
            font-size: 40px;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <span class="material-symbols-outlined">radio</span>
            <h1>Markov Chain Chord Progression Generator</h1>
        </div>
    </div>
    <div class="container">
        <div class="controls">
            <h3 style="margin-bottom: 10px;">Audio Controls:</h3>
            <button id="startBtn">Start</button>            
            <div class="chord-selector">
                <label for="startingChord">Starting Chord:</label>
                <select id="startingChord">
                </select>
            </div>
            <div class="chord-selector">
                <label for="waveformSelect">Waveform:</label>
                <select id="waveformSelect">
                    <option value="sine">Sine</option>
                    <option value="triangle">Triangle</option>
                    <option value="square">Square</option>
                    <option value="sawtooth">Sawtooth</option>
                </select>
            </div>
            <div class="chord-selector">
                <label>
                    Arpeggio Mode
                    <input type="checkbox" id="arpeggioToggle">
                </label>
            </div>
            <div class="volume-control">
                <label for="tempoSlider">Tempo:</label>
                <input type="range" id="tempoSlider" min="30" max="120" value="30">
                <span id="tempoValue">30 BPM</span>
            </div>
            <div class="volume-control">
                <label for="octaveSlider">Octave:</label>
                <input type="range" id="octaveSlider" min="-2" max="2" value="0" step="1">
                <span id="octaveValue">0</span>
            </div>
            <div class="volume-control">
                <label for="lowpassSlider">Lowpass:</label>
                <input type="range" id="lowpassSlider" min="20" max="20000" value="20000" step="1">
                <span id="lowpassValue">20000 Hz</span>
            </div>
            <div class="volume-control">
                <label for="reverbSlider">Reverb:</label>
                <input type="range" id="reverbSlider" min="0" max="100" value="0">
                <span id="reverbValue">0%</span>
            </div>
            <div class="volume-control">
                <label for="delaySlider">Delay:</label>
                <input type="range" id="delaySlider" min="0" max="100" value="0">
                <span id="delayValue">0%</span>
            </div>
        </div>
        <div>
            <div class="circle-container">
                <div class="circle-of-fifths" id="circleOfFifths">
                    <div class="center-chord" id="centerChord">C</div>
                </div>
            </div>
            <div class="project-description">
                <h3>About This Project</h3>
                <p>
                    This is a generative, stochastic audio tool, that creates endless chord progressions using Markov chain based on simple circle of fifths relations. 
                    Alternatively, you can input your own chord progression to generate endless variations of it.
                    The generated progressions are then played through a simple synthesizer.                                                
                </p>
                <p>
                    The circle visualization shows the current chord (highlighted) and its position in the circle of fifths. 
                    Major chords are shown in the outer ring, with their relative minors in the inner ring.
                </p>
                <p>
                    The tempo, octave, and waveform can be adjusted to your liking. Experiment with effects like 
                    reverb, delay, and lowpass filter. Toggle arpeggio mode to hear the chords played as sequential notes 
                    rather than simultaneously.
                </p>
                <p>
                    Made by <a href="https://github.com/akzmuk">Arthur K.</a>
                </p>
            </div>
        </div>
        <div>
            <div class="chord-info">
                <h3>Current Chord: <span id="currentChord">C</span></h3>
                <div class="progression-section">
                    <h5>Custom Chord Progression</h5>
                    <div class="control-group">
                        <input type="text" id="progressionInput" placeholder="C G Am F">
                    </div>
                    <div class="control-group">
                        <label>
                            <input type="checkbox" id="strictProgressionToggle">
                            Only use input chords
                        </label>
                    </div>
                    <div class="random-controls">
                        <select id="progressionLength">
                            <option value="4">4 chords</option>
                            <option value="8">8 chords</option>
                            <option value="12">12 chords</option>
                            <option value="16">16 chords</option>
                        </select>
                        <button id="randomProgressionBtn" class="icon-button">
                            <span class="material-symbols-outlined">casino</span>
                        </button>
                    </div>
                    <button id="applyProgressionBtn">Apply</button>
                </div>
                <div id="transitions"></div>
            </div>
        </div>
    </div>

    <script src="chordSynthesizer.js"></script>
</body>
</html>
